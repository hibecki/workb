@model PPcore.Models.course_group

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12" style="padding-top:15px;">
            <table><tr><td><h4 class="txt-color-blue">ข้อมูลกลุ่มหลักสูตร</h4></td><td class="txt-color-blue" style="padding-top:2px">&nbsp;&nbsp;&nbsp;&nbsp;แก้ไขข้อมูลกลุ่มหลักสูตร</td></tr></table>
        </div>
    </div>

    <div class="panel panel-blue">
        <div class="panel-heading">
            <div class="pull-left" style="padding-top:5px;">ข้อมูลกลุ่มหลักสูตร</div>
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
            <form asp-action="Edit">
                <div class="form-horizontal">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div style="position:relative;top:-57px;margin-right:.5em;float:right;margin-bottom:-2em;">
                        <button id="btnSave" type="submit" class="btn btn-default btn-panel-yellow">&nbsp;<i class="fa fa-floppy-o" aria-hidden="true" style="color:white;"></i>&nbsp;&nbsp;จัดเก็บ&nbsp;&nbsp;</button>
                        <div id="btnDetails" class="btn btn-default btn-panel-yellow" onclick="location.href='@Url.Action("Index", "course_group")'">&nbsp;<i class="fa fa-file-text" aria-hidden="true" style="color:white;"></i>&nbsp;&nbsp;ดูข้อมูลทั้งหมด</div>
                    </div>
                    <input asp-for="rowversion" /><input asp-for="id" />
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="row">
                                            <label asp-for="cgroup_code" class="col-md-2 control-label"></label>
                                            <div class="col-md-4">
                                                <input asp-for="cgroup_code" class="form-control" />
                                                <span asp-validation-for="cgroup_code" class="text-danger" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">

                                    <div class="form-group">
                                        <div class="row">
                                            <label asp-for="cgroup_desc" class="col-md-2 control-label"></label>
                                            <div class="col-md-4">
                                                <input asp-for="cgroup_desc" class="form-control" />
                                                <span asp-validation-for="cgroup_desc" class="text-danger" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="row">
                                            <label asp-for="x_status" class="col-md-2 control-label"></label>
                                            <div class="col-md-4">
                                                <select asp-for="x_status" asp-items="ViewBag.x_status" class="form-control"></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>




                        </div>
                    </div>
                </div>
            </form>

            <div id="course_typeTable"></div>

        </div>
    </div>


</div>

<!-- Modal -->
<div class="modal fade modalForm1" id="course_typeModal" tabindex="-1" role="dialog" aria-labelledby="course_typeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div id="course_typeModalHeader" class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="vertical-align:middle;top:15px">&times;</button>
                <h4 class="modal-title" id="course_typeModalLabel" style="vertical-align:middle;"></h4>
            </div>
            <div class="modal-body container-fluid">
                @{ await Html.RenderPartialAsync("~/Views/course_type/ViewInput", new PPcore.Models.course_type());  }
                
            </div>
        </div>
    </div>
</div>
<!-- /Modal -->

    @section scripts {
        <script>
            $(document).ready(function () {
                $.ajax({
                    type: 'get', url: '@Url.Action("DetailsAsTableList", "course_type")' + '?cgroup_code=' + $('#cgroup_code').val(),
                }).done(function (resp) {
                    $('#course_typeTable').html(resp);

                    $('#btnCreateCourseType').off('click').on('click', function () {
                        $('#course_typeModalLabel').text('เพิ่มรหัสประเภทหลักสูตร');
                        $('#course_typeSubmit').html('บันทึก');
                        $('#course_typeModal').modal({ backdrop: 'static', keyboard: false });
                    });

                    $('#btnEditCourseType').off('click').on('click', function () {
                        console.log('testtttt');
                    });

                    $('#btnDeleteCourseType').off('click').on('click', function () {
                        console.log('testtttt');
                    });
                    //$('#btnCreateProduct').hide(); $('#btnEditProduct').hide();
                    //var tableProduct = setTableProductDetailsAsTableList($('#dataTablesProductDetailsAsTableList'));
                    //tableProduct.$('tr:first').click();

                    @*$('#product_type').off('change').on('change', function () {
                    var sPattern = $('#searchPattern').val().trim();
                    $.ajax({
                        type: 'get', url: '@Url.Action("DetailsAsJsonList", "products")' + '?product_type_code=' + $('#product_type').val() + '&product_group_code=' + $('#product_group').val() + '&pattern=' + sPattern,
                    }).done(function (resp) {
                        if (resp != "") {
                            resp = JSON.parse(resp);
                            if (!jQuery.isEmptyObject(resp)) {
                                tableProduct.clear().draw();
                                for (var i in resp) {
                                    tableProduct.row.add([resp[i].rec_no, resp[i].product_code, resp[i].product_desc, '<div id="btnS' + resp[i].id + '"><div class="btn btn-xs btn-default btn-panel-yellow" onclick="mem_productEdit(\'' + data[1] + '\',\'' + resp[i].id + '\')">&nbsp;<i class="fa fa-plus-circle" aria-hidden="true" style="color:white;"></i>&nbsp;&nbsp;เลือก&nbsp;&nbsp;</div></div>']);
                                }
                                tableProduct.draw();
                            } else {
                                tableProduct.clear().draw();
                            }
                        } else {
                            tableProduct.clear().draw();
                        }
                        tableProduct.$('tr:first').click();
                    });
                });*@

                    @*$('#product_group').off('change').on('change', function () {
                    $.ajax({
                        type: 'get', url: '@Url.Action("SelectBy", "product_type")' + '?product_group_code=' + $('#product_group').val(),
                    }).done(function (resp) {
                        if (resp != "") {
                            $('#product_type').empty();
                            $('#product_type').append(resp);
                            $('#product_type').trigger("change");
                        } else {
                            $('#product_type').empty();
                        }
                    });
                });*@
                });
            });
        </script>
    }


